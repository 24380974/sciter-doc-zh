<html>
  <head>
    <meta name="source" content="http://www.terrainformatica.com/wiki/doku.php?id=h-smile:built-in-behaviors:edit"/>
    <meta name="generator" content="h-smile:richtext"/>
  </head>
<body>
  <h1>behavior: htmlarea</h1>
  <p>HTML WYSIWYG(所见即所得) 行为。</p>
  <p>该行为支持类似于&lt;frame&gt;/behavior:frame的文档容器模式 - 它支持加载完整的&lt;html&gt;...&lt;/html&gt;文档到它的内部。</p>
  <h2>元素</h2>
  <p>默认情况下，应用了该行为的元素有:</p>
  <ul>
    <li><code>&lt;htmlarea&gt;...&lt;/htmlarea&gt;</code> 编辑器;</li></ul>
  <h2>属性</h2>
  <p>该行为需要知道的属性:</p>
  <ul>
    <li><code>readonly</code> - bool, 声明改元素是只读的;</li>
		<li><code>content-style</code> - string, 一个应用到编辑器内容的.css文件的URL。 在你需要为编辑内容设置特有样式时可以使用该属性。</li></ul>
  <h2>模型</h2>
  <p>富文本支持两种内容模型。HTML片段: </p>
  <pre>&lt;htmlarea&gt;
   &lt;h2&gt;Some HTML content&lt;/h2&gt;
   &lt;p&gt;Line 2&lt;/p&gt;
   &lt;p&gt;Line 3&lt;/p&gt;
&lt;/htmlarea&gt;
</pre>
	<p>以及全文档。在这种场景中，<code>&lt;htmlarea&gt;</code>的行为类似与一个包含了文档的<code>&lt;frame&gt;</code>:</p>
	<pre>&lt;htmlarea&gt;
   &lt;html&gt;
      &lt;body&gt;
        &lt;h2&gt;Some HTML content&lt;/h2&gt;
        &lt;p&gt;Line 2&lt;/p&gt;
        &lt;p&gt;Line 3&lt;/p&gt;
      &lt;/body&gt;
   &lt;/html&gt;
&lt;/htmlarea&gt;</pre> <p>内容模型取决于加载到编辑器中的文档类型。</p>
<h2>事件</h2>
  <p>除了标准的事件集(mouse, keyboard, focus)外， <em>behavior: htmlarea</em>还生成:</p>
  <ul>
    <li>EDIT_VALUE_CHANGED 事件 - 由于用户的操作导致元素的值被改变事件。异步事件。</li>
    <li>EDIT_VALUE_CHANGING 事件 - 当元素的值将要改变之前被触发。同步事件。</li></ul>
  <h2>值</h2>
  <p>string, 反应编辑缓冲区的当前状态。</p>
  <p>string, 反应DOM内容的当前状态- value可以获取/设置当前HTML的内容; 对于富文本DOM元素，<i>value</i>属性是<i>html</i>属性的别名。</p>
  <h2>特有的快捷键组合</h2>
  <ul>
    <li>LEFT, CTRL+LEFT, SHIFT+LEFT, CTRL+SHIFT+LEFT</li>
    <li>RIGHT, CTRL+RIGHT, SHIFT+RIGHT, CTRL+SHIFT+RIGHT</li>
    <li>HOME, SHIFT+HOME</li>
    <li>END, SHIFT+END</li>
    <li>BACKSPACE, ALT+BACKSPACE, CTRL+BACKSPACE</li>
    <li>CTRL+A</li>
    <li>DELETE, SHIFT+DELETE, CTRL+DELETE</li>
    <li>INSERT, SHIFT+INSERT, CTRL+INSERT</li>
    <li>CTRL+X</li>
    <li>CTRL+V</li>
    <li>CTRL+Z</li>
    <li>CTRL+(LEFT)SHIFT 和 CTRL+(RIGHT)SHIFT - 这两个快捷键在形式上相当于在<code>dir</code>属性上切换<code>dir=&quot;ltr&quot;</code>和<code>dir=&quot;rtl&quot;</code>。</li></ul>
  <h2>方法</h2>
  <dl>
    <dt><code>loadDocument</code></dt>
    <dd><code>(url:string): true|false</code> 
      <p>从URL加载文件到编辑器中;</p></dd>
    <dt><code>saveDocument</code></dt>
    <dd><code>(url:string): true|false</code> 
      <p>保存content到文件中;</p></dd>
    <dt><code>emptyDocument</code></dt>
    <dd><code>(text:string):&nbsp;true|false</code>
      <p>初始化编辑器为一个空文档;</p></dd>
    <dt><code>sourceToContent</code></dt>
    <dd><code>(html:string, url:string, selStart:integer, selEnd:integer):&nbsp;true|false</code>
      <p>将<i>text</i>字符串设置到content中，并且根据<i>selStart</i>和<i>selEnd</i>设置选择范围;</p>
       <p>这个方法将<i>html</i>字符串设置到content中，并且根据<i>selStart</i>和<i>selEnd</i>设置选择内容。</p>
			<p>这个方法增量更新内容 - 该方法用于从可选的撤销/重做栈中从使用HTML源代码更新时使用;</p></dd>
    <dt><code>contentToSource</code></dt>
    <dd>
      <code>() : [html:string, selStart:integer, selEnd:integer] </code>
      <p>返回一个有3个元素的数组，包括content和选择范围;</p>
    </dd>
  </dl>
</body>
</html>